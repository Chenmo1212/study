<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>青年大学习</title>
  <link rel="stylesheet" href="./css/main.css">
</head>

<body id="max-control">
  <div class="container" id="container">
    <!-- header begin -->
    <div class="header">
      <!-- 背景 -->
      <div class="bg-img" id="bg-pre">
        <!-- accept: 可以接受gif,jpeg,png,jpg的格式 -->
        <input type="file" name="bg" id="bg-ipt" value="" accept="image/gif, image/jpeg, image/png, image/jpg">
      </div>
      <!-- 大头像 -->
      <input type="text" name="大网名" value="余生少年" class="name name-b" id='nickName-b'>
      <div id="avatar-pre-b">
        <input type="file" name="avatar-b" id="ava-ipt-b" value="" accept="image/gif, image/jpeg, image/png, image/jpg">
      </div>
    </div>

    <!-- mid begin -->
    <div class="mid">
      <div class="line line1"></div>
      <span class="new" onclick="showPicModal()">朋友的新动态</span>
      <div class="line line2"></div>
    </div>

    <div class="body">
      <!-- 小头像 -->
      <div id="avatar-pre-s">
        <input type="file" name="avatar-s" id="ava-ipt-s" value="" accept="image/gif, image/jpeg, image/png, image/jpg">
      </div>
      <!-- 内容 -->
      <input type="text" name="" value="余生少年" class="name name-s" id='nickName-s'>
      <div class="content-main">
        <textarea rows="4" cols="" id="mainContent" style="margin: 0px;width: 90%;height: 80px;">XXXX学院 &#10;XXXXXXX-XX XXXX &#10;已完成“青年大学习”网上主题团课第八季第八期的课程</textarea>
      </div>

      <div class="article">
        <div class="cover"></div>
        <div class="content">
          <textarea rows="2" cols="" id="detailContent">满分！我完成了“青年大学习”网上主题团课第八季第八期的课程，你也来试试吧</textarea>
        </div>
      </div>

      <p class="delete">1分钟前 &nbsp;<i id="longPress">删除</i></p>

      <div class="point">
        <span></span>
        <span></span>
      </div>

      <div class="divider"></div>

      <!-- 一言小头像 -->
      <div class="motto-avatar" onclick="clickme()"></div>
      <!-- 内容 -->
      <div class="name name-s" id='nickName-s'><a href="http://www.hitokoto.cn/" style="text-decoration: none; color: #454545;" target="_Blank">一言</a></div>
      <div class="motto" onclick="getHitokoto()">
        <!-- <p id="hitokoto">:D 获取中...</p> -->
        <p id="hitokoto">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
          consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <p id="hitokoto-from" style="text-align: right;">:D 获取中...</p>
      </div>
    </div>
    <!-- 模式框 -->
    <div class="modal" id='modal'>
      <div class="zhezhao"></div>
      <div class="tankuang" id="tankuang">
        <div id="header">
          <span>说明</span>
        </div>
        <div class="content">
          <ol>
            <li>本网站是为了懒人们服务的，由于学校经常需要共青团学习的截图，因此，随手做了一个网站，方便大家使用。</li>
            <li>该网站的背景图和头像是随机生成的，并且支持手机相册上传！</li>
            <li>网站内所有的文字均支持更改！</li>
            <li>网站支持本地保存，相册上传的图片和更改的文字将会在本地保存！</li>
            <li>长按“删除”即可清除本地缓存。</li>
            <li>注意：该网站只是可以不用转发朋友圈，<span style="color: #f56c6c;">务必进入公众号签到后再使用该网站</span>，别给你们团支书找麻烦。</li>
          </ol>
        </div>
        <div id="header-right" onclick="hidder()">我知道了</div>
      </div>
    </div>

    <!-- 生成图片提示模式框 -->
    <div class="pic_modal" id='pic_modal' style="display: none;">
      <div class="zhezhao"></div>
      <div class="tankuang" id="tankuang">
        <div id="header">
          <span>请长按保存</span>
        </div>
        <div class="content" id="pic_content"></div>
        <div class="btn">
          <span onclick="hidder()">关闭</span>
        </div>
      </div>
    </div>

    <!-- 生成图片提示模式框 -->
    <div class="tip_modal" id='tip_modal' style="display: none;">
      <div class="zhezhao"></div>
      <div class="tankuang" id="tankuang">
        <div id="header">
          <span>说明</span>
        </div>
        <div class="content">
          <ol style="margin-top: 2rem;">
            <li>头像和背景使用<span style="color: #f56c6c;">随机图片</span>时生成的图片将<span style="color: #f56c6c;">无法显示</span></li>
            <li>您可以通过<span style="color: #f56c6c;">上传本地图片</span>使图片正常显示。</li>
            <li>若坚持使用网络图片，您可以通过<span style="color: #f56c6c;">截图</span>的方式进行保存图片。</li>
          </ol>
        </div>
        <div class="btn">
          <span onclick="hidder()">算了</span>
          <span onclick="takeScreenshot()">继续</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 生成图片提示模式框 -->
  <div class="loading" id='loading' style="display: none">
    <div class="zhezhao"></div>
    <div class="tankuang" id="tankuang">
      <div class="sk-spinner sk-spinner-pulse"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer id="footer">
    <p style="text-align: center;font-size: 12px;"> &copy; <a href="https://chenmo1212.site">ChenMo</a> | <a href="http://beian.miit.gov.cn/">鄂ICP备19020558号</a> | <a href="https://github.com/Chenmo1212/study">Github</a>.</p>
  </footer>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
<script src="js/main.js"></script>
<script src="js/canvas2image.js"></script>
<!-- 现代写法，推荐(不支持 IE) -->
<script>
  const hitokoto = document.getElementById('hitokoto');
  const hitokoto_from = document.getElementById('hitokoto-from');
  getHitokoto()

  function getHitokoto() {
    fetch('https://v1.hitokoto.cn')
      .then(response => response.json())
      .then(data => {
        hitokoto.innerText = data.hitokoto;
        hitokoto_from.innerText = "——" + data.from;
        // console.log(document.getElementById("container").clientHeight)
        // console.log(window.screen.height)
      })
      .catch(err => console.error(err));
  }

  var timeId = setInterval(function() {
    getHitokoto()
  }, 8000)


  function showToast(msg, duration) {
    duration = isNaN(duration) ? 3000 : duration;
    var m = document.createElement('div');
    m.innerHTML = msg;
    m.style.cssText = "width:80%; min-width:180px; max-width:360px;background:#000; opacity:0.8; height:auto;min-height: 30px; color:#fff; line-height:30px; text-align:center; border-radius:4px; position:fixed; top:80%; left:50%;margin-left: -40%; z-index:999999;";
    document.body.appendChild(m);
    setTimeout(function() {
      var d = 0.1;
      m.style.webkitTransition = '-webkit-transform ' + d + 's ease-in, opacity ' + d + 's ease-in';
      m.style.opacity = '0';
      setTimeout(function() {
        document.body.removeChild(m)
      }, d * 1000);
    }, duration);
  }

  function clickme() {
    showToast("恭喜您！请求数据成功！请求数据成功！", 5000);
  }
</script>

</html>
